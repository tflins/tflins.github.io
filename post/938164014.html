<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 3.9.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>浅谈浏览器渲染原理 - 枫林晚记</title><meta name="description" content="前言浏览器对于一个前端开发者来说，就好比赛车对于赛车手，浏览器当中与前端开发息息相关的就是渲染引擎，了解浏览器的渲染原理，有助于我们从更高的维度去审视页面，出现问题时也可以让我们在一定程度上透过事物看本质。之前还在上大学的时候，就想写一篇关于浏览器渲染的博客，奈何当时认知有限，迟迟未下笔。"><meta name="keywords" content="浏览器,布局,渲染原理,渲染进程"><meta property="og:type" content="article"><meta property="og:title" content="浅谈浏览器渲染原理"><meta property="og:url" content="https://tflin.com/post/938164014.html"><meta property="og:site_name" content="枫林晚记"><meta property="og:description" content="前言浏览器对于一个前端开发者来说，就好比赛车对于赛车手，浏览器当中与前端开发息息相关的就是渲染引擎，了解浏览器的渲染原理，有助于我们从更高的维度去审视页面，出现问题时也可以让我们在一定程度上透过事物看本质。之前还在上大学的时候，就想写一篇关于浏览器渲染的博客，奈何当时认知有限，迟迟未下笔。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://tflin.com/images/og_image.png"><meta property="og:updated_time" content="2021-10-27T10:48:46.525Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="浅谈浏览器渲染原理"><meta name="twitter:description" content="前言浏览器对于一个前端开发者来说，就好比赛车对于赛车手，浏览器当中与前端开发息息相关的就是渲染引擎，了解浏览器的渲染原理，有助于我们从更高的维度去审视页面，出现问题时也可以让我们在一定程度上透过事物看本质。之前还在上大学的时候，就想写一篇关于浏览器渲染的博客，奈何当时认知有限，迟迟未下笔。"><meta name="twitter:image" content="https://tflin.com/images/og_image.png"><link rel="icon" href="/images/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.4.1/css/all.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><link rel="stylesheet" href="/css/back-to-top.css"><link rel="stylesheet" href="/css/progressbar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"><meta name="referrer" content="no-referrer"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/logo.png" alt="浅谈浏览器渲染原理" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" target="_self" href="/">首页</a> <a class="navbar-item" target="_self" href="/archives/">归档</a> <a class="navbar-item" target="_self" href="/categories/">分类</a> <a class="navbar-item" target="_self" href="/tags/">标签</a> <a class="navbar-item" target="_self" href="/chitchat/">闲言</a> <a class="navbar-item" target="_self" href="/about/">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/tflins"><i class="fab fa-github"></i> </a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i> </a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main"><div class="card"><div class="card-content article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><i class="fas fa-angle-double-right"></i>浅谈浏览器渲染原理</h1><div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto"><div class="level-left"><time class="level-item has-text-grey" datetime="2021-10-18T12:19:15.000Z"><i class="far fa-calendar-alt">&nbsp;</i>2021-10-18</time> <time class="level-item has-text-grey is-hidden-mobile" datetime="2021-10-27T10:48:46.525Z"><i class="far fa-calendar-check">&nbsp;</i>2021-10-27</time><div class="level-item"><a class="has-link-grey -link" href="/categories/浏览器/">浏览器</a></div><span class="level-item has-text-grey">24 分钟 读完 (大约 3644 个字)</span></div></div><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>浏览器对于一个前端开发者来说，就好比赛车对于赛车手，浏览器当中与前端开发息息相关的就是渲染引擎，了解浏览器的渲染原理，有助于我们从更高的维度去审视页面，出现问题时也可以让我们在一定程度上透过事物看本质。之前还在上大学的时候，就想写一篇关于浏览器渲染的博客，奈何当时认知有限，迟迟未下笔。</p><a id="more"></a><h2 id="渲染进程"><a href="#渲染进程" class="headerlink" title="渲染进程"></a>渲染进程</h2><p>浏览器的渲染进程的核心任务是将 HTML、CSS、JavaScript 等，解析渲染成可以和用户交互的一个网页，浏览器的排版引擎、JavaScript 引擎就是在该进程中运行。<strong>一般而言，浏览器会为每一个单独的窗口创建一个单独的渲染进程</strong>，并且，出于安全考虑，这些渲染进程都是以沙箱模式运行，互不影响。但也有例外，比如通过 <code>window.open()</code> 打开一个同源页面，那这新开的同源页面会复用上一个页面的渲染进程，该页面渲染进程崩溃，使用同一个渲染进程的页面也会崩溃。这些都与浏览器的安全策略有关，这里不再赘述。</p><div align="center"><img src="https://tflins.oss-cn-beijing.aliyuncs.com/blog/iShot2021-08-06 14.32.42.png?versionId=CAEQHRiBgICWvdjo2BciIDViZDJjNDQ5ZjkyMzRjZmQ5NmJlMTg0NGU5MzY5NmVi" alt="demo1" style="zoom:50%"></div><h2 id="构建-DOM-树"><a href="#构建-DOM-树" class="headerlink" title="构建 DOM 树"></a>构建 DOM 树</h2><p>HTML 即「超文本标记语言」，浏览器是无法直接理解的。需要经过编译之后变成一个 DOM 树，方便渲染进程去处理。其过程简单概况就是：<strong>字节 → 字符 → 令牌 → 节点 → 文档对象模型（DOM）</strong>。</p><p><strong>字节 → 字符：</strong>当浏览器从磁盘或网络中拿到一个 HTML 文件时，需要对其进行原始字节的读取，并根据文件的编码格式（如 <code>uft8</code>） 等，将它转换成各个字符，也就是需要将原始字节转换成我们所看的 HTML 字符串。</p><p><strong>字符 → 令牌：</strong>浏览器将一个将原始字节转换得到 HTML 字符内容后，第一时间需要考虑如何对其进行拆分，需要进行词法分析，经过一个<strong>令牌化</strong>（<code>tokenizer</code>）的过程得到 token ，这个过程可以算是编译原理中最重要的环节。词法分析是对字符串进行识别的一个过程，比如一个 HTML 文件里面有大量的标签，需要对它们进行标识，输出一个 <code>token</code> 构成的单词流，想了解这方面的细节，可以去学习编译原理这门课程。</p><p><strong>令牌 → 节点：</strong>得到 <code>token</code> 后，浏览器会结合 <code>token</code> 解析 HTML，去实例化各个节点（Node），Node 是每一个 <code>Element</code> 的基类。<code>Node</code> 这个类包含有三个指针：前节点、后节点、父节点，每一个继承自 Node 的类，都会包含这三个属性。</p><p><strong>节点 → 文档对象模型（DOM）：</strong>构建完 Node 后，会根据这些 Node 中的包含父子节点关系的指针去构建一颗 DOM 树，这个过程可能需要大量的时间，可以打开浏览器的 devtools 在 performance 界面分析其 <code>parse HTML</code> 的时间。</p><p><img src="https://tflins.oss-cn-beijing.aliyuncs.com/img/202110182155022.png?x-oss-process=style/watermark" alt="html-token"></p><h2 id="构建-CSSOM（CSS-对象模型）"><a href="#构建-CSSOM（CSS-对象模型）" class="headerlink" title="构建 CSSOM（CSS 对象模型）"></a>构建 CSSOM（CSS 对象模型）</h2><p>和 HTML 文件一样，浏览器也无法直接理解 CSS，需要同处理 HTML 一般：<strong>字节 → 字符 → 令牌 → 节点 → CSSOM</strong>，将 CSS 构建成「CSS 对象模型（CSSOM）」，CSSOM 是一个以树结构描述的数据，方便查询或修改。由于 CSS 会有「继承」、「相对单位」等概念的存在，所以为了确定某个节点的具体属性，往往需要递归整个节点的父节点，去获取其确定的值。比如：子节点的 <code>width: 50%;</code>，是个相对值，为了确定其具体的绝对值，就需要去寻找它的第一个非相对宽度的祖先节点，才能确定该子节点的具体宽度。这是一个十分耗费性能的操作，但大大方便了开发者，这是一个<strong>取舍过程，比如我司的「海报编辑器」的数据模型，为了更快的渲染而放弃了这一机制，通通使用绝对单位</strong>。</p><p><img src="https://tflins.oss-cn-beijing.aliyuncs.com/img/202110182206058.png?x-oss-process=style/watermark" alt="css-cssom"></p><h2 id="构建渲染树"><a href="#构建渲染树" class="headerlink" title="构建渲染树"></a>构建渲染树</h2><p>当构建完成「DOM 树」和「CSSOM」后，需要将两者结合，构建一个渲染树，也称为布局树。在 DOM 中包含了很多不可见的标签，比如 head、meta 等标签，还有使用了 <code>display: none;</code> 的标签。构建渲染树时，会把这些不可见的标签统统忽略掉，渲染树只包含渲染网页时所需要的标签（可见的影响布局的标签）。</p><p>大体上是以下几个步骤：</p><ol><li>从 DOM 树的根节点开始遍历每个可见元素，会忽略不可见标签及通过 CSS 隐藏的标签，如 <code>display: none;</code>，但 <code>visibility: hidden;</code> 不会被忽略，因为它仅仅是视觉不可见，但却占着位置，影响布局。</li><li>对于可见的节点，去 CSSOM 匹配对应的样式并将其应用到布局树上。</li></ol><p><img src="https://tflins.oss-cn-beijing.aliyuncs.com/img/202110182223538.png?x-oss-process=style/watermark" alt="renderTree"></p><h2 id="布局阶段"><a href="#布局阶段" class="headerlink" title="布局阶段"></a>布局阶段</h2><p>在上一阶段得到一个完整的布局树后，浏览器就从布局树的根节点开始遍历，计算每个节点的布局信息、位置、大小等（相对于视口的绝对像素），然后保存在布局树中。</p><p><img src="https://tflins.oss-cn-beijing.aliyuncs.com/img/202110182235766.png?x-oss-process=style/watermark" alt="计算布局"></p><h2 id="分层"><a href="#分层" class="headerlink" title="分层"></a>分层</h2><p>到了这一步，拿到了布局树，及各个元素的位置信息，但并不会直接进行绘制，而是会经过一个名为「分层」的阶段。可以在 chrome 里面打开 developer tools，点击右侧那个三个小点的图标(more)，选择 More tools 里面的 Layers 就可以看到当前页面的分层情况了，如下图所示。</p><div align="center"><img src="https://tflins.oss-cn-beijing.aliyuncs.com/img/202108171717425.png?x-oss-process=style/watermark" style="zoom:33%"></div><h3 id="分层是什么"><a href="#分层是什么" class="headerlink" title="分层是什么"></a>分层是什么</h3><p>可以参考 Photoshop 里面的图层的概念，通常情况下，每个图层都是独立的，不会互相影响的，通过多个图层合成一张完整的图片。HTML 页面也是如此，浏览器将上一阶段得到的布局渲染树进行图层分解操作，得到多个图层，这就是浏览器的分层。</p><h3 id="为什么需要进行分层"><a href="#为什么需要进行分层" class="headerlink" title="为什么需要进行分层"></a>为什么需要进行分层</h3><p>一个复杂的网页，不仅包含着大量的节点，还有着复杂的动画效果，图片等。试想一下，如果这些「元素」都集中在一个图层中，会是怎样的效果。都集中在一个图层上，倘若其中一个炫酷的动画，作出改变的时候，会<strong>牵一发而动全身</strong>，整个图层都会重新绘制，单图层的渲染策略是极其低效的，这就是为何需要进行分层的原因。分层后，动画单独一个图层，动画发生时，仅改变动画本身的图层，不影响其他图层，就避免重排和重绘，这也是典型的分而治之的思想。</p><h3 id="如何分层"><a href="#如何分层" class="headerlink" title="如何分层"></a>如何分层</h3><p>知道为何进行分层后，就需要考虑如何分层。浏览器会遍历布局渲染树将其转换成一个称为「层树」（Layer Tree）的东西，每一个节点都属于有一个图层，如果这个节点没有自己的图层，那么它会属于父节点的图层。</p><p>分层的条件：</p><p>时代在变化，这些也可能会变化，但大体上是一下几种类型。</p><ul><li>具有 3D 或透视等 CSS 属性的元素。</li><li>使用加速视频解码&lt;video> 元素。</li><li>3D 上下文（webgl）或<a href="https://blog.chromium.org/2012/02/gpu-accelerating-2d-canvas-and-enabling.html" target="_blank" rel="noopener">加速 2D 上下文</a>的 &lt;canvas> 元素。</li><li>混合的插件，如 FLASH。</li><li>不透明度（opacity）使用了CSS动画，或者使用了 webkit 的动画转换（transform）的元素。</li><li>使用了加速的 CSS 过滤器的元素。</li><li>后代节点包含了复合层的元素（后代节点属于父节点的层）。</li><li>拥有<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context" target="_blank" rel="noopener">层叠上下文</a>属性的元素会被提升为一层。如：z-index、position: fixed 等。</li></ul><p>可以参考原文：chromium 的 设计文档：<a href="http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome" target="_blank" rel="noopener">GPU Accelerated Compositing in Chrome</a>。</p><p><img src="https://tflins.oss-cn-beijing.aliyuncs.com/img/202110191100928.png?x-oss-process=style/watermark" alt="layerTree"></p><h2 id="绘制（合成）"><a href="#绘制（合成）" class="headerlink" title="绘制（合成）"></a>绘制（合成）</h2><p>得到层树 <code>LayerTree</code> 后，渲染引擎会对它的每个图层进行绘制。类似把大象装进冰箱只需要三个步骤，渲染引擎会把一个图层的绘制拆分成很多个<strong>绘制指令</strong>，包含有绘制的操作、坐标、样式等，再将这些指令按顺序组成一个<strong>绘制指令表</strong>，有了绘制指令表后会进行栅格化的操作。</p><h3 id="栅格化"><a href="#栅格化" class="headerlink" title="栅格化"></a>栅格化</h3><p>栅格化又称光栅化，狭义上可以理解为把对应的图层转化为像素阵列图，执行绘制指令绘制成一张张图片。</p><p>另外绘制指令也不在主线程中执行，在得到绘制列表后，主线程会将绘制列表提交给渲染引擎的「合成线程」，由合成线程去执行绘制指令。</p><p>由于有些图层很大，全部进行绘制会产生极大的性能开销，所以合成线程会将图层进行<strong>分块</strong>，然后将位于视口（可见区域）的图块优先生成位图，这种栅格化的操作，称为「异步分块光栅化」。图层分块称为「tile 机制」，很多开放世界游戏都使用这种机制来绘制无缝地图，如 GTA5。</p><p>栅格化线程把视口附近的图块栅格化后，会存储到该分块的像素缓冲区（显存）中。</p><h2 id="合成"><a href="#合成" class="headerlink" title="合成"></a>合成</h2><p>图块全被栅格化后，就会生成一个绘制图块的指令（DrawQuad），将该指令提交给浏览器进程，由 <a href="https://chromium.googlesource.com/chromium/src/+/HEAD/services/viz/" target="_blank" rel="noopener">viz</a>(可视化) 模块从显存中读取位图来绘制图块，将内容写到内存中，再内存中的图片显示在显示器上。</p><h2 id="整体流程"><a href="#整体流程" class="headerlink" title="整体流程"></a>整体流程</h2><p>从上面所分析的内容可以得到，一个浏览器渲染的关键路径，如下图：</p><p><img src="https://tflins.oss-cn-beijing.aliyuncs.com/img/202110211454131.png?x-oss-process=style/watermark" alt></p><p>整体来说，就是浏览器中的网络线程会将加载进来的数据，如 HTML 之类的通过 IPC（进程间的通讯）传递给渲染进程。渲染进程中的主线程会将 HTML 解析成 DOM；将 CSS 解析成 CSSOM（styleSheets）并计算单位绝对值得到样式表；然后将 DOM 和 CSSOM 结合生成仅含可见包元素的布局树，并应用样式和计算布局；再将布局树进行分层操作，得到层树；层树进行绘制操作（paint），生成绘制指令表；此时，主线程会将布局树和绘制指令表一起传递给合成线程，合成线程在将图层拆分成各个图块（tile）也称为贴片；接着会传递给 GPU 进行栅格化图层，将图块转换成位图，存储在显存中；栅格化线程处理完毕后，合成线程会得到称为 “draw quads” 的图块信息，将这些信息合成一个帧（frame）称为合成器帧，通过 IPC 传递给浏览器进程；最后，浏览器进程得到当前合成帧后，会调用 GPU 进行相应的绘制操作，将当前图片信息绘制到显示器上。</p><h3 id="重排（回流）"><a href="#重排（回流）" class="headerlink" title="重排（回流）"></a>重排（回流）</h3><p>当你通过 JavaScript 或者 CSS 改变了元素的布局信息，如宽高、位置、可见性等属性时，会触发重新的布局流程，及其后续的一系列操作，这种行为成为重排或者回流。重排需要更新一套完整的渲染流程，对性能的开销无疑是巨大的。</p><h4 id="引起回流的操作"><a href="#引起回流的操作" class="headerlink" title="引起回流的操作"></a>引起回流的操作</h4><p>能已引起元素几何布局信息发生变化的操作，都会触发回流。</p><h2 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h2><p>当你改变不会影响元素布局的属性的时候，比如元素的颜色、背景颜色、边框颜色、阴影等，会触发重新绘制，重新生成绘制指令表，及后续的一系列流程。因为没有改变布局信息，所以不会重新布局，执行效率会比重排高一些。</p><h2 id="直接合成"><a href="#直接合成" class="headerlink" title="直接合成"></a>直接合成</h2><p>当然，有些操作不会在主线程中执行，而是在合成线程中执行，如 css 中 transform 属性，就不会经过回流和重绘的阶段，</p><h2 id="一些问题的解答"><a href="#一些问题的解答" class="headerlink" title="一些问题的解答"></a>一些问题的解答</h2><p>innerHTML alert</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path?hl=zh-cn" target="_blank" rel="noopener">https://developers.google.com/web/fundamentals/performance/critical-rendering-path?hl=zh-cn</a></li><li><a href="http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome" target="_blank" rel="noopener">http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome</a></li><li><a href="https://www.bilibili.com/read/cv7962757?spm_id_from=333.999.0.0" target="_blank" rel="noopener">https://www.bilibili.com/read/cv7962757?spm_id_from=333.999.0.0</a></li></ul><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ul><li>重排</li><li>重绘</li><li>css 会阻塞渲染吗</li><li>js 会阻塞渲染吗</li><li>requireFragment</li><li>innerHTML 后直接 alert</li><li>总结</li></ul></div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="https://tflin.com/post/938164014.html">浅谈浏览器渲染原理</a></li><li><strong>本文作者：</strong><a href="https://tflin.com">tflin</a></li><li><strong>本文链接：</strong><a href="https://tflin.com/post/938164014.html">https://tflin.com/post/938164014.html</a></li><li><strong>发布时间：</strong>2021-10-18</li><li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li></ul><div class="level is-size-7 is-uppercase"><div class="level-start"><div class="level-item"><i class="fas fa-tags has-text-grey"></i>&nbsp; <a class="has-link-grey -link" href="/tags/布局/">布局</a>,&nbsp;<a class="has-link-grey -link" href="/tags/浏览器/">浏览器</a>,&nbsp;<a class="has-link-grey -link" href="/tags/渲染原理/">渲染原理</a>,&nbsp;<a class="has-link-grey -link" href="/tags/渲染进程/">渲染进程</a></div></div></div></div></div><div class="card card-transparent"><div class="level post-navigation is-flex-wrap is-mobile"><div class="level-end"><a class="level level-item has-link-grey article-nav-next" href="/post/1020330288.html"><span class="level-item">浅谈 100vh 在移动端中的差异及解决方案</span> <i class="level-item fas fa-chevron-right"></i></a></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5 has-text-weight-normal">PS: 有问题，或者有不同意见，请移步至 <a href="https://github.com/tflins/tflins.github.io/issues" target="_blank">github</a> 提交 issues 进行讨论</h3></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen has-order-1 column-left is-sticky"><div class="card widget column-left is-sticky" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#前言"><span class="has-mr-6">1</span> <span>前言</span></a></li><li><a class="is-flex" href="#渲染进程"><span class="has-mr-6">2</span> <span>渲染进程</span></a></li><li><a class="is-flex" href="#构建-DOM-树"><span class="has-mr-6">3</span> <span>构建 DOM 树</span></a></li><li><a class="is-flex" href="#构建-CSSOM（CSS-对象模型）"><span class="has-mr-6">4</span> <span>构建 CSSOM（CSS 对象模型）</span></a></li><li><a class="is-flex" href="#构建渲染树"><span class="has-mr-6">5</span> <span>构建渲染树</span></a></li><li><a class="is-flex" href="#布局阶段"><span class="has-mr-6">6</span> <span>布局阶段</span></a></li><li><a class="is-flex" href="#分层"><span class="has-mr-6">7</span> <span>分层</span></a><ul class="menu-list"><li><a class="is-flex" href="#分层是什么"><span class="has-mr-6">7.1</span> <span>分层是什么</span></a></li><li><a class="is-flex" href="#为什么需要进行分层"><span class="has-mr-6">7.2</span> <span>为什么需要进行分层</span></a></li><li><a class="is-flex" href="#如何分层"><span class="has-mr-6">7.3</span> <span>如何分层</span></a></li></ul></li><li><a class="is-flex" href="#绘制（合成）"><span class="has-mr-6">8</span> <span>绘制（合成）</span></a><ul class="menu-list"><li><a class="is-flex" href="#栅格化"><span class="has-mr-6">8.1</span> <span>栅格化</span></a></li></ul></li><li><a class="is-flex" href="#合成"><span class="has-mr-6">9</span> <span>合成</span></a></li><li><a class="is-flex" href="#整体流程"><span class="has-mr-6">10</span> <span>整体流程</span></a><ul class="menu-list"><li><a class="is-flex" href="#重排（回流）"><span class="has-mr-6">10.1</span> <span>重排（回流）</span></a><ul class="menu-list"><li><a class="is-flex" href="#引起回流的操作"><span class="has-mr-6">10.1.1</span> <span>引起回流的操作</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#重绘"><span class="has-mr-6">11</span> <span>重绘</span></a></li><li><a class="is-flex" href="#直接合成"><span class="has-mr-6">12</span> <span>直接合成</span></a></li><li><a class="is-flex" href="#一些问题的解答"><span class="has-mr-6">13</span> <span>一些问题的解答</span></a></li><li><a class="is-flex" href="#总结"><span class="has-mr-6">14</span> <span>总结</span></a></li><li><a class="is-flex" href="#参考"><span class="has-mr-6">15</span> <span>参考</span></a></li><li><a class="is-flex" href="#TODO"><span class="has-mr-6">16</span> <span>TODO</span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start has-text-centered-mobile"><a class="footer-logo is-block has-mb-6" href="/"><img src="/images/logo.png" alt="浅谈浏览器渲染原理" height="28"></a><p class="is-size-7">&copy; 2021 tflin&nbsp; Powered by <a href="http://tflin.com/" target="_blank">枫林晚记</a></p><p class="is-size-7">本站共计51.8k字</p><p class="is-size-7"><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021076261号-1</a></p></div><div class="level-end"><div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle"><p class="control"><a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/tflins"><i class="fab fa-github"></i></a></p></div></div></div></div><script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279475949&web_id=1279475949"></script><style>a[title="站长统计"]{display:none}</style></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:""}}}</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script src="/js/gallery.js" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>document.addEventListener("DOMContentLoaded",(function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})}))</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><script>document.addEventListener("DOMContentLoaded",(function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})}))</script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><script src="/js/main.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js" defer></script><link rel="stylesheet" href="/css/search.css"><link rel="stylesheet" href="/css/insight.css"><script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":40},"mobile":{"show":false}});</script></body></html>