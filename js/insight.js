!function(n,t){var e=n(".ins-search"),i=e.find(".ins-search-input"),r=e.find(".ins-section-wrapper"),a=e.find(".ins-section-container");function s(e,i,r,a,s){return n("<div>").addClass("ins-selectable").addClass("ins-search-item").append(n("<header>").append(n("<i>").addClass("fa").addClass("fa-"+e)).append(n("<span>").addClass("ins-title").text(null!=i&&""!==i?i:t.TRANSLATION.UNTITLED)).append(r?n("<span>").addClass("ins-slug").text(r):null)).append(a?n("<p>").addClass("ins-search-preview").text(a):null).attr("data-url",s)}function o(e,i){var r,a,o;if(0===i.length)return null;switch(r=t.TRANSLATION[e],e){case"POSTS":case"PAGES":a=i.map(function(n){return s("file",n.title,null,n.text.slice(0,150),n.link)});break;case"CATEGORIES":case"TAGS":a=i.map(function(n){return s("CATEGORIES"===e?"folder":"tag",n.name,n.slug,null,n.link)});break;default:return null}return(o=r,n("<section>").addClass("ins-section").append(n("<header>").addClass("ins-section-header").text(o))).append(a)}function c(n){return n.split(" ").filter(function(n){return!!n}).map(function(n){return n.toUpperCase()})}function u(n,t,e){var i=c(n);return i.filter(function(n){return e.filter(function(e){return!!t.hasOwnProperty(e)&&(t[e].toUpperCase().indexOf(n)>-1||void 0)}).length>0}).length===i.length}function l(n,t,e,i){var r=0;return c(n).forEach(function(n){var a=new RegExp(n,"img");e.forEach(function(n,e){if(t.hasOwnProperty(n)){var s=t[n].match(a);r+=s?s.length*i[e]:0}})}),r}function f(n,t){var e=function(n){return{POST:function(t){return l(n,t,["title","text"],[3,1])},PAGE:function(t){return l(n,t,["title","text"],[3,1])},CATEGORY:function(t){return l(n,t,["name","slug"],[1,1])},TAG:function(t){return l(n,t,["name","slug"],[1,1])}}}(t),i=function(n){return{POST:function(t){return u(n,t,["title","text"])},PAGE:function(t){return u(n,t,["title","text"])},CATEGORY:function(t){return u(n,t,["name","slug"])},TAG:function(t){return u(n,t,["name","slug"])}}}(t),r=n.posts,a=n.pages,s=n.tags,o=n.categories;return{posts:r.filter(i.POST).sort(function(n,t){return e.POST(t)-e.POST(n)}).slice(0,5),pages:a.filter(i.PAGE).sort(function(n,t){return e.PAGE(t)-e.PAGE(n)}).slice(0,5),categories:o.filter(i.CATEGORY).sort(function(n,t){return e.CATEGORY(t)-e.CATEGORY(n)}).slice(0,5),tags:s.filter(i.TAG).sort(function(n,t){return e.TAG(t)-e.TAG(n)}).slice(0,5)}}function p(t){var e=n.makeArray(a.find(".ins-selectable")),i=-1;e.forEach(function(t,e){n(t).hasClass("active")&&(i=e)});var s=(e.length+i+t)%e.length;n(e[i]).removeClass("active"),n(e[s]).addClass("active"),function(n){if(0!==n.length){var t=r[0].clientHeight,e=n.position().top-r.scrollTop(),i=n[0].clientHeight+n.position().top;i>t+r.scrollTop()&&r.scrollTop(i-r[0].clientHeight),e<0&&r.scrollTop(n.position().top)}}(n(e[s]))}function d(n){n&&n.length&&(location.href=n.attr("data-url"))}e.parent().remove(".ins-search"),n("body").append(e),n.getJSON(t.CONTENT_URL,function(t){"#ins-search"===location.hash.trim()&&e.addClass("show"),i.on("input",function(){var e=n(this).val();!function(n){for(var t in a.empty(),n)a.append(o(t.toUpperCase(),n[t]))}(f(t,e))}),i.trigger("input")});var h=!1;n(document).on("click focus",".navbar-main .search",function(){e.addClass("show"),e.find(".ins-search-input").focus()}).on("click touchend",".ins-search-item",function(t){("click"===t.type||h)&&(d(n(this)),h=!1)}).on("click touchend",".ins-close",function(t){("click"===t.type||h)&&(n(".navbar-main").css("pointer-events","none"),setTimeout(function(){n(".navbar-main").css("pointer-events","auto")},400),e.removeClass("show"),h=!1)}).on("keydown",function(n){if(e.hasClass("show"))switch(n.keyCode){case 27:e.removeClass("show");break;case 38:p(-1);break;case 40:p(1);break;case 13:d(a.find(".ins-selectable.active").eq(0))}}).on("touchstart",function(n){h=!0}).on("touchmove",function(n){h=!1})}(jQuery,window.INSIGHT_CONFIG);